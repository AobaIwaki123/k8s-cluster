# =============================================================================
# Firebolt Core Helm Chart Values
# セルフホスト型の Firebolt データベースエンジン設定
# =============================================================================

# Docker イメージ設定
image:
  # Firebolt Core の公式イメージリポジトリ
  repository: ghcr.io/firebolt-db/firebolt-core
  # イメージタグ（未指定の場合は Chart.yaml の appVersion を使用）
  tag: ""

# =============================================================================
# デプロイメント設定
# =============================================================================

# デプロイするノード数（StatefulSet のレプリカ数）
nodesCount: 1

# Pod の readiness プローブを有効にするかどうか
readiness: true

# =============================================================================
# リソース設定
# =============================================================================

# 各 Pod のリソース制限とリクエスト
# 注意: Firebolt Core は最低でも 1CPU を推奨
resources:
  requests:
    cpu: "1"     # CPU リクエスト
    memory: 4Gi  # メモリリクエスト
  limits:
    memory: 4Gi  # メモリ制限

# Pod に追加するラベル
extraLabels: {}

# =============================================================================
# デプロイメント詳細設定
# =============================================================================

deployment:
  # Pod 終了時の猶予時間（秒）
  # クエリの完了を待つための時間
  terminationGracePeriodSeconds: 5
  
  # Pod のセキュリティコンテキスト
  securityContext:
    readOnlyRootFilesystem: false  # ルートファイルシステムを読み取り専用にしない
  
  # Pod のセキュリティ権限
  securityCapabilities:
    add:
      - IPC_LOCK  # メモリロック権限
      - SYS_NICE  # プロセス優先度変更権限
  
  # =============================================================================
  # ストレージ設定
  # =============================================================================
  
  storageSpec:
    # アクセスモード
    accessModes:
      - ReadWriteOnce  # 単一ノードからの読み書きアクセス
    
    # 使用するストレージクラス（Ceph RBD を使用）
    storageClassName: ceph-rbd
    
    # ストレージリソース設定
    resources:
      requests:
        storage: 1Gi  # 要求するストレージ容量
      limits:
        storage: 1Gi  # ストレージ容量の上限
